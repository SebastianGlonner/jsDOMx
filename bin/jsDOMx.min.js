define(function(){"use strict";var c=function(a){this.doc=a||window.document,this.createNode=this.Element.bind(this)},b=c.prototype,a=null,d=null,f={},e={};return b.Element=function(){for(var b,g,i,c,e=this.doc.createElement(arguments[0]),h=0,j=arguments.length;++h<j;)if(b=arguments[h],g=typeof b,"string"===g)if(i=b.substring(0,2),".."===i)e.className=b.substring(2);else if("::"===i){if(!a)throw new Error('InvalidArgumentException: You try to store to "'+b+'" without given storage argument!');if(b=b.substring(2),a.hasOwnProperty(b))throw new Error('InvalidArgumentException: You try to store to "::'+b+'" twice!');a[b]=e}else e.appendChild(this.doc.createTextNode(b));else if("object"!==g||1!==b.nodeType&&3!==b.nodeType)if("function"===g){if(c=b.__$domtetpl===!0?b.call(null,f,d):b(),void 0===c)continue;Array.isArray(c)||(c=[c]),Array.prototype.splice.apply(arguments,[h+1,0].concat(c)),j=arguments.length}else if(Array.isArray(b))Array.prototype.splice.apply(arguments,[h+1,0].concat(b)),j=arguments.length;else{if("object"!==g)throw new Error("InvalidArgumentException");for(c in b)b.hasOwnProperty(c)&&(e[c]=b[c])}else e.appendChild(b);return e},b.register=function(a,b){return e[a]=b,a},b.render=function(f,b,g,c){if(arguments.length>3&&("object"!=typeof c||c instanceof Array))throw new Error("InvalidArgumentException: Storage must be an object.");return a=arguments.length>3?c:null,d=g,"function"==typeof b?this.register(f,b):b=e[f],b(this.createNode)},c});